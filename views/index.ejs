<%- include('partials/header') %>


<%const foundItemsLength = instructors.length+courses.length;%>
<%const numberOfPages = Math.ceil(foundItemsLength/15);%>
<%let numberOfPagesShown;%>
<%let numberOfItems;%>
<%let numberOfInstructorsInPage;%>
<%let numberOfCoursesInPage;%>
<%const initialPageForCourses = Math.floor(instructors.length/15)+1;%>
<%let initialNumberOfCourses;%>
<%if(courses.length>=15-(instructors.length-(15*(initialPageForCourses-1)))) {%>
  <%initialNumberOfCourses=15-(instructors.length-(15*(initialPageForCourses-1)));%>
<%}else {%>
  <%initialNumberOfCourses=courses.length;%>
<%}%>


<%if(instructors.length>=15*page) {%>
  <%numberOfInstructorsInPage=15;%>
  <%numberOfCoursesInPage=0;%>
<%} else {%>
  <%numberOfInstructorsInPage=instructors.length-(15*(page-1));%>
  <%if(numberOfInstructorsInPage<=0) {%>
    <%numberOfCoursesInPage=15;%>
  <%} else {%>
    <%numberOfCoursesInPage=15-numberOfInstructorsInPage;%>
  <%}%>
<%}%>


<%if(instructors.length===0 && courses.length===0) {%>
<p>hoca veya ders bulunamadi</p>
<%} else {%>
  <div class="container-fluid px-0 py-3">
  <table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col"></th>
      <th scope="col" style="width: 85%">ders/hoca</th>
    </tr>
  </thead>
  <tbody>

<%for(let i=(15*(page-1)); i<(15*(page-1))+numberOfInstructorsInPage; i++) {%>
  <%if(instructors[i]) {%>

      <tr>
      <th scope="row" class="text-center"><%=i+1%></th>
      <td><a href="/instructors/<%=instructors[i].name%>">
        <%=instructors[i].name%>
      </a></td>
      </tr>

  <%} else {%>
  <%break;%>
  <%}%>
<%}%>


<%if(page==initialPageForCourses) {%>
  <%for(let i=0; i<initialNumberOfCourses; i++) {%>
    <%if(courses[i]) {%>

      <tr>
      <th scope="row" class="text-center"><%=i+1+instructors.length%></th>
      <td><a href="/courses/<%=courses[i].title+courses[i].code%>">
        <%=courses[i].title+courses[i].code%>
      </a></td>
      </tr>


    <%} else {%>
    <%break;%>
    <%}%>
  <%}%>

<%} else {%>
  <%for(let i=(15*(page-initialPageForCourses-1)+initialNumberOfCourses); i<(15*(page-initialPageForCourses-1)+initialNumberOfCourses)+15; i++) {%>
    <%if(courses[i]) {%>
      <tr>
      <th scope="row" class="text-center"><%=i+1+instructors.length%></th>
      <td><a href="/courses/<%=courses[i].title+courses[i].code%>">
        <%=courses[i].title+courses[i].code%>
      </a></td>
      </tr>

    <%} else {%>
    <%break;%>
    <%}%>
  <%}%>

<%}%>
</tbody>
</table>
</div>
<%}%>


<%let classOne="";%>
<%let classLast="";%>
<%if(page==1) {%>
<%classOne = "disabled";%>
<%}%>
<%if(page==numberOfPages) {%>
<%classLast= "disabled";%>
<%}%>


<nav class="mt-2">
  <ul class="pagination justify-content-center">
    <li class="page-item <%=classOne%>">
      <form action="/index" method="get">
        <button class="page-link" type="submit" name="page" value=<%=page-1%> aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
        <span class="sr-only">Previous</span>
        </button>
        <input type="hidden" name="search" value=<%=search%> />
      </form>
    </li>

    <%if(numberOfPages>10) {%>
      <%if(page>3 && page<numberOfPages-8) {%>
        <li class="page-item">
          <form action="/index" method="get">
            <button class="page-link" type="submit" name="page" value=1>1
            </button>
            <input type="hidden" name="search" value=<%=search%> />
          </form>
        </li>
        <li class="page-item disabled">
            <a class="page-link" type="submit" name="page" value="">...
            </a>
        </li>
        <%for(let i=page; i<=page+7; i++) {%>
        <li class="page-item">
          <form action="/index" method="get">
            <button class="page-link" type="submit" name="page" value=<%=i%>><%=i%>
            </button>
            <input type="hidden" name="search" value=<%=search%> />
          </form>
        </li>
        <%}%>
        <li class="page-item disabled">
            <a class="page-link" type="submit" name="page" value="">...
            </a>
        </li>
        <li class="page-item">
          <form action="/index" method="get">
            <button class="page-link" type="submit" name="page" value=<%=numberOfPages%>><%=numberOfPages%>
            </button>
            <input type="hidden" name="search" value=<%=search%> />
          </form>
        </li>

      <%} else if(page>=numberOfPages-8){%>
        <li class="page-item">
          <form action="/index" method="get">
            <button class="page-link" type="submit" name="page" value=1>1
            </button>
            <input type="hidden" name="search" value=<%=search%> />
          </form>
        </li>
        <li class="page-item disabled">
            <a class="page-link" type="submit" name="page" value="">...
            </a>
        </li>
        <%for(let i=page; i<=numberOfPages; i++) {%>
        <li class="page-item">
          <form action="/index" method="get">
            <button class="page-link" type="submit" name="page" value=<%=i%>><%=i%>
            </button>
            <input type="hidden" name="search" value=<%=search%> />
          </form>
        </li>
        <%}%>

      <%} else{%>
        <%for(let i=1; i<=10; i++) {%>
        <li class="page-item">
          <form action="/index" method="get">
            <button class="page-link" type="submit" name="page" value=<%=i%>><%=i%>
            </button>
            <input type="hidden" name="search" value=<%=search%> />
          </form>
        </li>
        <%}%>
        <li class="page-item disabled">
            <a class="page-link" type="submit" name="page" value="">...
            </a>
        </li>
        <li class="page-item">
          <form action="/index" method="get">
            <button class="page-link" type="submit" name="page" value=<%=numberOfPages%>><%=numberOfPages%>
            </button>
            <input type="hidden" name="search" value=<%=search%> />
          </form>
        </li>

      <%}%>


    <%} else {%>
      <%for(let i=1; i<=numberOfPages; i++) {%>
      <li class="page-item">
        <form action="/index" method="get">
          <button class="page-link" type="submit" name="page" value=<%=i%>><%=i%>
          </button>
          <input type="hidden" name="search" value=<%=search%> />
        </form>
      </li>
      <%}%>
    <%}%>




<li class="page-item <%=classLast%>">
<form action="/index" method="get">
  <button class="page-link" type="submit" name="page" value=<%=page+1%> aria-label="Next">
    <span aria-hidden="true">&raquo;</span>
    <span class="sr-only">Next</span>
  </button>
  <input type="hidden" name="search" value=<%=search%> />
</form>
</li>
  </ul>
</nav>

<%- include('partials/footer') %>
